-- Customer conversions for LTV attribution
CREATE TABLE CUSTOMER_CONVERSIONS (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    CAMPAIGN_ID NUMBER NOT NULL,
    CUSTOMER_ID VARCHAR2(100) NOT NULL,
    CONVERSION_DATE DATE NOT NULL,
    REVENUE_AMOUNT NUMBER(18,4) NOT NULL,
    LIFETIME_VALUE NUMBER(18,4),
    CREATED_AT TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL
);
CREATE INDEX IDX_CUSTOMER_CONV_CAMP_DATE ON CUSTOMER_CONVERSIONS (CAMPAIGN_ID, CONVERSION_DATE);
CREATE INDEX IDX_CUSTOMER_CONV_CUSTOMER ON CUSTOMER_CONVERSIONS (CUSTOMER_ID);
